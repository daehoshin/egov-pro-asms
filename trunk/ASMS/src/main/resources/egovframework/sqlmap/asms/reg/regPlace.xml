<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="regPlace">
	
	<select id="placeListSearch" parameterClass="PlaceVO" resultClass="PlaceVO">
		SELECT /* reg.placelistsearch */ 
		     A.PLC_ID
		   , A.PLC_NO
		   , A.REG_STATUS
		   , A.REG_ID
		   , A.REG_NM
		   , A.REG_DT
		   , A.SYS_ID
		   , A.SYS_NM
		   , A.SYS_DT
		   , B.PLC_NM
		   , B.ADDR
		   , B.ADDR_DETAIL
		FROM TB_PLCMAIN A JOIN TB_PLCDETAIL B
		ON   A.PLC_ID = B.PLC_ID
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="plc_no">
		 		A.PLC_NO = #plc_no#
		 	</isNotEmpty>
		 	<isNotEmpty prepend="AND" property="plc_nm">
		 		B.PLC_NM = #plc_nm#
		 	</isNotEmpty>
		 	<isNotEmpty prepend="AND" property="full_addr">
		 		B.ADDR||B.ADDR_DETAIL = #full_addr#
		 	</isNotEmpty>
		 	<isNotEmpty prepend="AND" property="reg_status">
		 		A.reg_status >= #reg_status#
		 	</isNotEmpty>
		 </dynamic>
	</select>
	
	<insert id="placeMainAdd" parameterClass="PlaceVO">
		INSERT /* reg.RegPlaceAddAction */
		INTO TB_PLCMAIN (
						  MP_ID
						, MP_NO
						, USER_AUTH_CD
						, MENU_GRP_ID
						, USE_FLAG
						, ENABLED
						, AUTHORITY
						, REG_ID
						, REG_NM
						, REG_DT
						, SYS_ID
						, SYS_NM
						, SYS_DT
						)
				VALUES (
						  #mp_id#
						, #mp_no#
						, #user_auth_cd#
						, #menu_grp_id#
						, #use_flag#
						, #enabled#
						, #authority#
						, #reg_id#
						, #reg_nm#
						, #reg_dt#
						, #sys_id#
						, #sys_nm#
						, #sys_dt#				
				)
	</insert>
	
	<insert id="placeDetailAdd" parameterClass="PlaceVO">
		INSERT /* reg.RegPlaceAddAction */
		INTO TB_PLCMAIN (
						, MP_ID
						, MP_NM
						, MP_CD
						, LOGIN_USER_ID
						, USER_PWD
						, JOIN_DT
						, RETIRE_DT
						, DEPT_NM
						, POSITION
						, EMP_CD
						, JOIN_CD
						, BIRTH_DT
						, ADDR
						, ADDR_DETAIL
						, EMAIL
						, TEL_NO
						)
				VALUES (
						  #mp_id#        
						, #mp_nm#        
						, #mp_cd#        
						, #login_user_id#
						, #user_pwd#     
						, #join_dt#      
						, #retire_dt#    
						, #dept_nm#      
						, #position#     
						, #emp_cd#       
						, #join_cd#      
						, #birth_dt#     
						, #addr#         
						, #addr_detail#  
						, #email#        
						, #tel_no#       
				)
	</insert>
	
</sqlMap>